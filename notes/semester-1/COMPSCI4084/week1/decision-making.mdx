---
title: "Python - Decision Making"
description: "if/elif/else、真值与短路、比较与逻辑运算、三元表达式、早返回与数据校验"
---

## 概要
- 目标：掌握 if/elif/else、条件表达式与短路求值，提升分支逻辑的清晰性。
- 适用：输入校验、分级判定、边界处理等常见任务。

## 学习目标
- 能正确编写 `if/elif/else` 并处理多分支。
- 理解真值测试与短路规则，避免多余判断。
- 会使用条件表达式（“三元”）与守卫式早返回精简代码。

## 关键知识点

### 1. if / elif / else 基本形态
```python
score = 85
if score >= 90:
    grade = "A"
elif score >= 80:
    grade = "B"
elif score >= 70:
    grade = "C"
else:
    grade = "D"
```
- 建议：从高到低（或互斥区间）排列条件；避免重叠。

---

### 2. 真值测试（truthiness）与短路
```python
items = []
if items:  # 空容器为 False，非空为 True
    first = items[0]
else:
    first = None

user = None
name = (user and user.get("name")) or "anonymous"  # and/or 短路
```
- 规则：`None/0/""/[]/{}/set()` 等为 False；其余多为 True。

---

### 3. 比较与逻辑运算
- 链式比较：`0 < x < 10`
- 相等 vs 同一性：值比较用 `==`，对象同一性才用 `is`。
```python
x = 5
if 0 < x < 10:
    pass

s1 = "a" * 3; s2 = "aaa"
print(s1 == s2)  # True（值相等）
print(s1 is s2)  # 实现相关，不保证 True；勿用 is 比较值
```

---

### 4. 条件表达式（“三元运算”）
```python
age = 19
status = "adult" if age >= 18 else "minor"
```
- 用于简单赋值分支；复杂逻辑仍用多行 if。

---

### 5. 守卫式早返回（Guard Clauses）
```python
def parse_score(raw: str) -> int | None:
    if raw is None:
        return None
    raw = raw.strip()
    if not raw.isdigit():
        return None
    val = int(raw)
    if not (0 <= val <= 100):
        return None
    return val
```
- 思路：先排除非法/边界情况，主路径更清晰扁平。

---

## 最佳实践
- 按互斥顺序组织条件；必要时提取为函数提高可测性。
- 用真值测试与短路精简判空/取值；避免链式嵌套。
- 值比较用 `==`；仅在确认“同一对象”时使用 `is`。
- 简单分支用条件表达式；复杂分支保持多行可读。

---

## 更新记录
- 最后更新：2025-09-28
